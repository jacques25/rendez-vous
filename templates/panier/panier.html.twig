{% extends "base.html.twig" %}


		{% block title %}	Panier	{% endblock %}
			{% set totalBijou = 0 %}
				{% set totalPrix = 0 %}

		{% block body %}

		  <div class="row mt-4">
       <div class="col-12">
		  	<h1> Votre Panier</h1>
	    </div>
	
		 {% for label, messages in app.flashes %}
         
           <div class="col-12 alert alert-{{ label }}">
              {% for message in messages %}
                     <p> {{ message}} </p>
              {% endfor %}
           </div>
        
       {% endfor %}

    
			</div>
	  
			{% if items|length  == 0 %} 
			 
				<div class="col-12 alert alert-success w-100 text-center uppercase"> Aucun article dans votre panier</div>
						
   
			
     {% else %}
			 <div class="table-responsive-sm table-responsive-xl table-responsive-md">
			   
        				<table class="table table-fixed m-2">
        						<thead class="table-thead">
        								<tr>
        
        									<th class="th-sm">Référence</th>
        	                 <th class="th-sm"> designation </th>
        									 <th class="th-sm"> Promo </th>
        									<th class="th-sm">  taille </th>
        									<th class="th-sm">	prix	</th>
        									<th class="th-sm">	quantité </th>
        									<th class="th-sm">  Total	</th>
        									<th class="th-sm"> action </th>
        
        								</tr>
        						</thead>
        			      <tbody class="table-tbody">
         		    {% for item in items %}
				      <tr>
						    <td>	{{item.reference}}	</td>
					      <td>
						     	{% if item.bijou.filename %}
								 <img class="img-responsive" src="{{vich_uploader_asset(item.bijou, 'imageFile')}}" width="60">
							
							   {% endif %}

						    </td>
	
                <td>
						      {% if item.bijou.promo %}
							    	<span class=" mt-5 p-2 bg-warning rounded-pill text-dark font-weight-bold">
								     	Promo !
								    </span>
							    {% endif %}
							  </td>
						    <td>	{{item.taille}}	</td>
    
						    <td>	{{item.prix}}</td>
						    <td>
						     	<form action={{path('panier_add', {'id': item.id} )}}>
							   	 <select class="span1" name="qte" onchange="this.form.submit()">
								  	 {% for i in 1..10 %}
									  	<option value="{{ i }}" {% if i == panier[item.id] %} selected="selected" {% endif %}>
											  {{i }}
										  </option>
									   {% endfor %}
							  	 </select>
						 	   </form>
						    </td>
                <td> {{item.prix * panier[item.id]}}
					         	{% set  totalBijou = totalBijou + ( item.prix * panier[item.id] )%}
										 </td>
						    <td>
						    	<a href="{{ path('panier_remove', {'id': item.id})}}" class="btn btn-sm btn-danger">
							    	<i class="fas fa-trash"></i>
							    </a>
						    </td>
				    	</tr>
				
					     {% endfor %}
			
               {% if items |length != 0 %}
					    <tr>
				     	  {% set Total = 0 %}	
			  	      {% set Total = totalBijou %}
				 	       <td colspan="12" class="font-weight-bold text-uppercase">
					         <span class="float-lg-right">Total : {{ Total }}€</span>
					      </td>
				      </tr>
		   
			        {% endif %}
			   
		
        					  </tbody>
        		  </table>	

      </div>
			<div class="col-12 mt-4">
			 <a href="{{path('app_homepage')}}" class="btn btn-secondary mt-2"> Poursuivre vos achats</a>
			 	{% if  items is not empty %}
									<a href="{{path('panier_livraison')}}" class="btn btn-panier btn-lg m-2">
										<i class="fa fa-shopping-basket"></i>
									Commander
									</a>
								{% endif %}
			</div>

			
			{% endif %}

{% endblock %}
